/*
 * File: /css/layout.css
 * Description: Page Structure, Containers, Step Layouts, Grid Systems
 *              Uses semantic tokens from variables.css
 */

/* ============================================
   APP SHELL / PAGE STRUCTURE
   ============================================ */

.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.app-header {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
  background-color: var(--color-bg-page);
  border-bottom: 1px solid var(--color-border);
}

.app-header-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-md) var(--space-lg);
  max-width: 1400px;
  margin: 0 auto;
}

.app-logo {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.app-logo-icon {
  width: 32px;
  height: 32px;
  color: var(--brand-super-blue);
}

.app-header-actions {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.app-main {
  flex: 1;
  padding: var(--space-xl) var(--space-lg);
}

.app-footer {
  padding: var(--space-lg);
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
  border-top: 1px solid var(--color-border);
}


/* ============================================
   CONTAINERS
   ============================================ */

.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--space-lg);
}

.container-sm {
  max-width: 640px;
}

.container-md {
  max-width: 900px;
}

.container-lg {
  max-width: 1200px;
}

.container-xl {
  max-width: 1400px;
}

.container-fluid {
  max-width: none;
}


/* ============================================
   STEP WIZARD LAYOUT
   ============================================ */

.wizard {
  max-width: 1000px;
  margin: 0 auto;
}

.wizard-header {
  margin-bottom: var(--space-xxl);
}

.wizard-stepper {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: var(--space-xl);
}

.wizard-stepper .step {
  flex-direction: column;
  text-align: center;
  min-width: 80px;
}

.wizard-stepper .step-connector {
  min-width: 60px;
  margin: 0 var(--space-sm);
}

@media (max-width: 768px) {
  .wizard-stepper .step-label {
    display: none;
  }
  
  .wizard-stepper .step-connector {
    min-width: 30px;
  }
}

.wizard-title {
  text-align: center;
  margin-bottom: var(--space-sm);
}

.wizard-description {
  text-align: center;
  color: var(--color-text-secondary);
  max-width: 600px;
  margin: 0 auto;
}

.wizard-content {
  margin-bottom: var(--space-xxl);
}

.wizard-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: var(--space-xl);
  border-top: 1px solid var(--color-border);
}

.wizard-footer-left {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}

.wizard-footer-right {
  display: flex;
  align-items: center;
  gap: var(--space-md);
}


/* ============================================
   STEP CONTENT SECTIONS
   ============================================ */

.step-section {
  margin-bottom: var(--space-xxl);
}

.step-section:last-child {
  margin-bottom: 0;
}

.step-section-header {
  margin-bottom: var(--space-lg);
}

.step-section-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-xs);
}

.step-section-description {
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
}


/* ============================================
   FORM LAYOUTS
   ============================================ */

.form-row {
  display: flex;
  gap: var(--space-lg);
  margin-bottom: var(--space-lg);
}

.form-row:last-child {
  margin-bottom: 0;
}

.form-row > .form-group {
  flex: 1;
  margin-bottom: 0;
}

@media (max-width: 640px) {
  .form-row {
    flex-direction: column;
    gap: var(--space-lg);
  }
}

/* Inline form */
.form-inline {
  display: flex;
  align-items: flex-end;
  gap: var(--space-md);
}

.form-inline .form-group {
  margin-bottom: 0;
}

/* Form grid */
.form-grid {
  display: grid;
  gap: var(--space-lg);
}

.form-grid-2 {
  grid-template-columns: repeat(2, 1fr);
}

.form-grid-3 {
  grid-template-columns: repeat(3, 1fr);
}

.form-grid-4 {
  grid-template-columns: repeat(4, 1fr);
}

@media (max-width: 768px) {
  .form-grid-2,
  .form-grid-3,
  .form-grid-4 {
    grid-template-columns: 1fr;
  }
}


/* ============================================
   DIGIT MAPPING TABLE (Step 2)
   ============================================ */

.digit-mapping {
  display: grid;
  gap: var(--space-md);
}

.digit-mapping-row {
  display: grid;
  grid-template-columns: 120px 1fr;
  gap: var(--space-md);
  align-items: center;
}

.digit-mapping-label {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  padding: var(--space-sm) var(--space-md);
  background-color: var(--color-bg-card-alt);
  border-radius: var(--radius-md);
  text-align: center;
}

.digit-mapping-select {
  max-width: 300px;
}

@media (max-width: 640px) {
  .digit-mapping-row {
    grid-template-columns: 80px 1fr;
  }
}


/* ============================================
   SPECIAL ACCOUNTS SECTION (Step 2)
   ============================================ */

.special-accounts {
  display: grid;
  gap: var(--space-lg);
}

.special-account-row {
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: var(--space-lg);
  align-items: center;
}

.special-account-label {
  font-weight: var(--font-weight-medium);
}

.special-account-input {
  max-width: 200px;
}

@media (max-width: 640px) {
  .special-account-row {
    grid-template-columns: 1fr;
    gap: var(--space-sm);
  }
}


/* ============================================
   UPLOAD AREA (Step 3)
   ============================================ */

.upload-section {
  display: grid;
  gap: var(--space-xl);
}

.upload-methods {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: var(--space-lg);
  align-items: center;
}

.upload-divider {
  color: var(--color-text-muted);
  font-size: var(--font-size-sm);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

@media (max-width: 768px) {
  .upload-methods {
    grid-template-columns: 1fr;
  }
  
  .upload-divider {
    text-align: center;
    padding: var(--space-md) 0;
  }
}

.paste-area {
  min-height: 200px;
}


/* ============================================
   COLUMN MAPPING (Step 3)
   ============================================ */

.column-mapping {
  margin-top: var(--space-xl);
}

.column-mapping-grid {
  display: grid;
  gap: var(--space-md);
}

.column-mapping-row {
  display: grid;
  grid-template-columns: 1fr 40px 1fr;
  gap: var(--space-md);
  align-items: center;
}

.column-mapping-arrow {
  text-align: center;
  color: var(--color-text-muted);
}

.column-mapping-source {
  padding: var(--space-sm) var(--space-md);
  background-color: var(--color-bg-card-alt);
  border-radius: var(--radius-md);
  font-family: var(--font-family-mono);
  font-size: var(--font-size-sm);
}

@media (max-width: 640px) {
  .column-mapping-row {
    grid-template-columns: 1fr;
    gap: var(--space-sm);
  }
  
  .column-mapping-arrow {
    transform: rotate(90deg);
  }
}


/* ============================================
   DATA PREVIEW
   ============================================ */

.data-preview {
  margin-top: var(--space-xl);
}

.data-preview-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-md);
}

.data-preview-title {
  font-size: var(--font-size-md);
  font-weight: var(--font-weight-semibold);
}

.data-preview-count {
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
}

.data-preview-table {
  max-height: 400px;
  overflow: auto;
}


/* ============================================
   MAPPING VERIFICATION (Step 4)
   ============================================ */

.mapping-summary {
  display: flex;
  gap: var(--space-lg);
  margin-bottom: var(--space-xl);
  flex-wrap: wrap;
}

.mapping-summary-item {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background-color: var(--color-bg-card-alt);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
}

.mapping-summary-icon {
  width: 20px;
  height: 20px;
}

.mapping-summary-count {
  font-weight: var(--font-weight-semibold);
}

.mapping-filters {
  display: flex;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
}

.filter-btn {
  padding: var(--space-xs) var(--space-md);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-full);
  background-color: var(--color-bg-card-alt);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-border);
  transition: all var(--transition-fast);
}

.filter-btn:hover {
  background-color: var(--color-bg-hover);
}

.filter-btn.active {
  background-color: var(--brand-super-blue);
  color: var(--brand-white);
  border-color: var(--brand-super-blue);
}

.mapping-table-wrapper {
  max-height: 600px;
  overflow: auto;
}


/* ============================================
   DOWNLOAD SECTION (Step 5)
   ============================================ */

.download-summary {
  background-color: var(--color-bg-card);
  border-radius: var(--radius-lg);
  padding: var(--space-xl);
  margin-bottom: var(--space-xl);
}

.download-summary-header {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  margin-bottom: var(--space-lg);
}

.download-summary-icon {
  width: 32px;
  height: 32px;
}

.download-summary-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
}

.download-summary-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-md);
}

.download-summary-item {
  display: flex;
  justify-content: space-between;
  padding: var(--space-sm) 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.download-summary-label {
  color: var(--color-text-secondary);
}

.download-summary-value {
  font-weight: var(--font-weight-semibold);
}

@media (max-width: 640px) {
  .download-summary-grid {
    grid-template-columns: 1fr;
  }
}

.download-buttons {
  display: flex;
  gap: var(--space-lg);
  flex-wrap: wrap;
}

.download-card {
  flex: 1;
  min-width: 280px;
  background-color: var(--color-bg-card-alt);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-lg);
  text-align: center;
  transition: all var(--transition-fast);
}

.download-card:hover {
  border-color: var(--brand-super-blue);
  transform: translateY(-2px);
}

.download-card-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto var(--space-md);
  color: var(--brand-super-blue);
}

.download-card-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-xs);
}

.download-card-filename {
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
  font-family: var(--font-family-mono);
  margin-bottom: var(--space-lg);
}

.next-steps {
  margin-top: var(--space-xxl);
  padding: var(--space-xl);
  background-color: var(--color-bg-card-alt);
  border-radius: var(--radius-lg);
}

.next-steps-title {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  margin-bottom: var(--space-lg);
}

.next-steps-list {
  counter-reset: step;
}

.next-steps-item {
  display: flex;
  gap: var(--space-md);
  margin-bottom: var(--space-md);
  color: var(--color-text-secondary);
}

.next-steps-item::before {
  counter-increment: step;
  content: counter(step);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background-color: var(--brand-super-blue);
  color: var(--brand-white);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  border-radius: 50%;
  flex-shrink: 0;
}


/* ============================================
   RESPONSIVE UTILITIES
   ============================================ */

@media (max-width: 1024px) {
  .hide-lg {
    display: none !important;
  }
}

@media (max-width: 768px) {
  .hide-md {
    display: none !important;
  }
  
  .app-main {
    padding: var(--space-lg) var(--space-md);
  }
}

@media (max-width: 640px) {
  .hide-sm {
    display: none !important;
  }
  
  .wizard-footer {
    flex-direction: column;
    gap: var(--space-md);
  }
  
  .wizard-footer-left,
  .wizard-footer-right {
    width: 100%;
    justify-content: center;
  }
}
